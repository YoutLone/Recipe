% if !current_user %>
  <div class="text-center py-3">
    <%= link_to "Sign In", new_user_session_path, class: "btn btn-primary mr-3" %>
    <%= link_to "Sign Up", new_user_registration_path, class: "btn btn-secondary" %>
  </div>
<% end %>

<div class="container mx-auto px-6 md:px-12 xl:px-32 mt-10">
  <div class="text-center text-gray-800">
    <div class="block rounded-lg shadow-lg px-6 py-6 md:py-12 md:px-12" style="margin-top: -250px; background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(30px);">
      <h1 class="text-3xl md:text-4xl xl:text-5xl font-bold tracking-tight mb-12">Consistent Taste with Uniform Measure of <br />
        <span class="text-red-600">Foods and Recipes</span></h1>
      <%= link_to 'Add Food', new_food_path, class:"btn btn-primary mr-3" %>
      <%= link_to 'Add Recipe', new_user_recipe_path(current_user), class:"btn btn-outline-primary" %>
    </div>
  </div>
</div>

<div class="container mx-auto flex flex-wrap mt-10">
  <% @recipes.each do |recipe| %>
    <div class="w-full lg:w-1/3 px-4 mb-8">
      <%= link_to user_recipe_path(recipe.user_id, recipe)  do %>
        <div class="m-5 p-6 rounded-lg shadow-lg bg-white">
          <h5 class="text-gray-900 text-xl leading-tight font-medium mb-2"><%= recipe.name %></h5>
          <p class="text-gray-700 text-base mb-4">By: <%= recipe.user.name %></p>
          <% @recipe_foods = RecipeFood.joins(:food, :recipe).where(food: { user: recipe.user_id }, recipe: { user: recipe.user_id }) %>
          <% @total_items = @recipe_foods.where(recipe_id: recipe.id).count %>
          <% @total_cost = @recipe_foods.where(recipe_id: recipe.id).sum('food.quantity * food.price') %>
          <div class="text-gray-900 text-lg leading-tight font-medium mb-2">Total Food Items: <%= @total_items %></div>
          <div class="text-gray-900 text-lg leading-tight font-medium mb-2">Total Price: <%= number_to_currency @total_cost %></div>
        </div>
      <% end %>
    </div>
  <% end %>
</div>
